<section class="auth-wrap">
  <div class="auth-card">
    <div class="auth-illustration" style="<%= session_background_asset.present? ? "background-image: url(#{asset_path(session_background_asset)});" : "background-image: url(#{asset_path('banner-1600.jpg')});" %>">
      <div class="auth-hero-copy">
        <h2>Track your meals</h2>
        <p>Find patterns. Keep favorites on repeat.</p>
      </div>
    </div>
    <div class="auth-panel">
      <p class="eyebrow">Welcome back</p>
      <h1>Sign in to Today We Ate</h1>
      <p class="muted">Track meals, rate them, and see trends.</p>

      <%= form_with url: email_login_path, method: :post, class: "stack gap-sm auth-form", style: "margin-top: 1rem;" do |f| %>
        <div class="field-group">
          <%= label_tag :email, "Email" %>
          <%= email_field_tag :email, params[:email], required: true, autocomplete: "email" %>
        </div>
        <div class="field-group">
          <%= label_tag :password, "Password" %>
          <%= password_field_tag :password, nil, required: true, autocomplete: "current-password" %>
        </div>
        <%= submit_tag "Sign in", class: "btn primary wide" %>
      <% end %>

      <div class="or">or</div>

      <div class="oauth-buttons" style="margin-top: 0.25rem;">
        <%= link_to "Continue with Google", "/auth/google_oauth2", class: "btn wide", data: { turbo: false } %>
        <% unless Rails.env.production? %>
          <%= link_to "Developer sign in", "/auth/developer", class: "btn ghost wide", data: { turbo: false } %>
        <% end %>
      </div>

      <p class="muted small" style="margin-top: 0.75rem;">Don't have an account? <%= link_to "Create one", signup_path(email: params[:email]) %></p>
    </div>
  </div>
</section>
